"use strict";(self.webpackChunkpakki=self.webpackChunkpakki||[]).push([[403],{2403:(D,v,u)=>{u.r(v),u.d(v,{UsersModule:()=>F});var d=u(94666),p=u(5830),m=u(22607),I=u(60598),c=u.n(I),e=u(22560),o=u(2508),g=u(69706),h=u(92302),f=u(8944),C=u(29484),Z=u(60135),b=u(70207),y=u(75074),T=u(31267),U=u(57371);function _(r,l){if(1&r&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.viewValue," ")}}let N=(()=>{class r{constructor(t,a){this.apiservice=t,this.sweetalertservice=a,this.usercreate=new o.cw({name:new o.NI("",[o.kI.required]),lastName:new o.NI("",[o.kI.required]),documentType:new o.NI("",[o.kI.required]),docu:new o.NI("",[o.kI.required]),mobil:new o.NI("",[o.kI.minLength(10),o.kI.maxLength(10),o.kI.required]),address:new o.NI("",[o.kI.required]),email:new o.NI("",[o.kI.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/),o.kI.required]),city:new o.NI("",[o.kI.required]),citycode:new o.NI(""),country:new o.NI("",[o.kI.required]),countrycode:new o.NI(""),state:new o.NI(""),homephone:new o.NI(""),workphone:new o.NI("",[o.kI.required])}),this.usuariocreado=new e.vpe,this.tipo_doc=[{value:"cc",viewValue:"cedula de ciudadania"},{value:"ce",viewValue:"cedula de extranjeria"},{value:"nit",viewValue:"numero de identificacion tributaria"},{value:"pap",viewValue:"pasaporte"}]}ngOnInit(){}onCountryChange(t){"pais_seleccionado"===t.propiedad&&(this.usercreate.patchValue({country:t.valor.CountryName}),this.usercreate.patchValue({countrycode:t.valor.CountryCode}))}sendData(){this.apiservice.post("rgs/r",this.usercreate.value).subscribe(t=>{c().fire({icon:"success",title:t.msg,confirmButtonText:"Aceptar"}),this.usuariocreado.emit(!0)},t=>{console.log("error al crear usuario",t),this.sweetalertservice.errorMessage(t.error.msg?t.error.msg:"Error al crear usuario")})}onCityChange(t){this.usercreate.patchValue({city:t.valor.StateName}),this.usercreate.patchValue({citycode:t.valor.StateCode}),this.usercreate.patchValue({state:t.valor.StateName+t.valor.StateCode})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.s),e.Y36(m.P))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-createuser"]],outputs:{usuariocreado:"usuariocreado"},decls:51,vars:20,consts:[["id","createuser","data-backdrop","static","data-keyboard","false","tabindex","-1","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],[1,"row"],[1,"col"],["matInput","","placeholder","Nombre","formControlName","name","type","text"],["matInput","","placeholder","Apellido","formControlName","lastName","type","text"],["placeholder","Tipo de Documento","formControlName","documentType"],[3,"value",4,"ngFor","ngForOf"],[3,"label","control"],[3,"label","maxLength","control"],["matInput","","placeholder","Direcci\xf3n","formControlName","address","type","text"],[1,"col-6"],["matInput","","placeholder","Correo","formControlName","email","type","text"],[3,"stateCtrl","label","tipo","PaisCambiado"],[3,"label","countrycode","ciudad","ciudadCambiada"],[1,"example-full-width","has-label"],["matInput","","placeholder","Estado","type","text","disabled","",3,"value"],["type","button",1,"btn","btn-warning","float-right",3,"disabled","click"],[3,"value"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Crear Usuario"),e.qZA(),e.TgZ(6,"button",5)(7,"span",6),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",11)(14,"mat-form-field"),e._UZ(15,"input",12),e.qZA()(),e.TgZ(16,"div",11)(17,"mat-form-field"),e._UZ(18,"input",13),e.qZA()()(),e.TgZ(19,"div",10)(20,"div",11)(21,"mat-form-field")(22,"mat-select",14),e.YNc(23,_,2,2,"mat-option",15),e.qZA()()(),e.TgZ(24,"div",11),e._UZ(25,"app-inputnumerico",16),e.qZA()(),e.TgZ(26,"div",10)(27,"div",11),e._UZ(28,"app-inputnumerico",17),e.qZA(),e.TgZ(29,"div",11)(30,"mat-form-field"),e._UZ(31,"input",18),e.qZA()()(),e.TgZ(32,"div",10)(33,"div",19)(34,"mat-form-field"),e._UZ(35,"input",20),e.qZA()(),e.TgZ(36,"div",19),e._UZ(37,"app-inputnumerico",17),e.qZA()(),e.TgZ(38,"div",10)(39,"div",19)(40,"app-input-country",21),e.NdJ("PaisCambiado",function(n){return a.onCountryChange(n)}),e.qZA()(),e.TgZ(41,"div",19)(42,"app-inputciudad",22),e.NdJ("ciudadCambiada",function(n){return a.onCityChange(n)}),e.qZA()()(),e.TgZ(43,"div",10)(44,"div",19)(45,"mat-form-field",23),e._UZ(46,"input",24),e.qZA()(),e.TgZ(47,"div",19),e._UZ(48,"app-inputnumerico",16),e.qZA()(),e.TgZ(49,"button",25),e.NdJ("click",function(){return a.sendData()}),e._uU(50," Crear "),e.qZA()()()()()()()),2&t){let i;e.xp6(11),e.Q6J("formGroup",a.usercreate),e.xp6(12),e.Q6J("ngForOf",a.tipo_doc),e.xp6(2),e.Q6J("label","Documento")("control",a.usercreate.get("docu")),e.xp6(3),e.Q6J("label","Celular")("maxLength",10)("control",a.usercreate.get("mobil")),e.xp6(9),e.Q6J("label","T\xe9lefono de Casa")("maxLength",10)("control",a.usercreate.get("homephone")),e.xp6(3),e.Q6J("stateCtrl",a.usercreate.get("country"))("label","Pais")("tipo",1),e.xp6(2),e.Q6J("label","Ciudad")("countrycode",a.usercreate.get("countrycode"))("ciudad",a.usercreate.get("city")),e.xp6(4),e.Q6J("value",(null==a.usercreate||null==(i=a.usercreate.get("city"))?null:i.value)+"-"+(null==a.usercreate||null==(i=a.usercreate.get("citycode"))?null:i.value)),e.xp6(2),e.Q6J("label","T\xe9lefono de Trabajo")("control",a.usercreate.get("workphone")),e.xp6(1),e.Q6J("disabled",a.usercreate.invalid)}},dependencies:[d.sg,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.R,C.d,Z.O,b.ey,y.KE,T.Nt,U.gD],styles:["\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjcmVhdGV1c2VyLmNvbXBvbmVudC5jc3MifQ== */"]}),r})();function V(r,l){if(1&r&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.viewValue," ")}}let J=(()=>{class r{constructor(t,a){this.apiservice=t,this.sweetalertservice=a,this.userUpdate=new e.vpe,this.userupdate=new o.cw({email:new o.NI(""),docu:new o.NI(""),name:new o.NI("",[o.kI.required]),lastName:new o.NI("",[o.kI.required]),documentType:new o.NI(""),mobil:new o.NI("",[o.kI.minLength(10),o.kI.maxLength(10)]),address:new o.NI(""),city:new o.NI(""),citycode:new o.NI(""),country:new o.NI(""),countrycode:new o.NI(""),state:new o.NI(""),homephone:new o.NI(""),workphone:new o.NI("")}),this.tipo_doc=[{value:"cc",viewValue:"cedula de ciudadania"},{value:"ce",viewValue:"cedula de extranjeria"},{value:"nit",viewValue:"numero de identificacion tributaria"},{value:"pap",viewValue:"pasaporte"}]}ngOnInit(){}ngOnChanges(t){console.log("===================================="),console.log(t),console.log("===================================="),t.userdoc&&this.getDataUserbyDoc()}onCountryChange(t){"pais_seleccionado"===t.propiedad&&(this.userupdate.patchValue({country:t.valor.CountryName}),this.userupdate.patchValue({countrycode:t.valor.CountryCode}))}sendData(){this.apiservice.put("rgs/r",this.userupdate.value).subscribe(t=>{c().fire({icon:"success",title:t.msg,confirmButtonText:"Aceptar"}),this.userUpdate.emit(!0)},t=>{console.log("error al actualizar usuario",t),this.sweetalertservice.errorMessage("Error al actualizar usuario")})}onCityChange(t){this.userupdate.patchValue({city:t.valor.StateName}),this.userupdate.patchValue({citycode:t.valor.StateCode}),this.userupdate.patchValue({state:t.valor.StateName+t.valor.StateCode})}getDataUserbyDoc(){this.userdoc&&this.apiservice.post("cl/userxcc",{DocumentID:this.userdoc}).subscribe(a=>{this.userupdate.patchValue({name:a.msg[0].name?a.msg[0].name:""}),this.userupdate.patchValue({lastName:a.msg[0].lastName?a.msg[0].lastName:""}),this.userupdate.patchValue({email:a.msg[0].email?a.msg[0].email:""}),this.userupdate.patchValue({docu:a.msg[0].docu?a.msg[0].docu:""}),this.userupdate.patchValue({city:a.msg[0].city?a.msg[0].city:""}),this.userupdate.patchValue({country:a.msg[0].country?a.msg[0].country:""}),this.userupdate.patchValue({state:a.msg[0].state?a.msg[0].state:""})},a=>{console.log("error al consultar usuarios",a)})}removeData(){this.userdoc="",this.userupdate.patchValue({email:""}),this.userupdate.patchValue({docu:""}),this.userupdate.patchValue({name:""}),this.userupdate.patchValue({lastName:""}),this.userupdate.patchValue({documentType:""}),this.userupdate.patchValue({mobil:""}),this.userupdate.patchValue({city:""}),this.userupdate.patchValue({citycode:""}),this.userupdate.patchValue({countrycode:""}),this.userupdate.patchValue({homephone:""}),this.userupdate.patchValue({workphone:""})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.s),e.Y36(m.P))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-updateuser"]],inputs:{userdoc:"userdoc"},outputs:{userUpdate:"userUpdate"},features:[e.TTD],decls:45,vars:17,consts:[["id","updateuser","data-backdrop","static","data-keyboard","false","tabindex","-1","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container-fluid"],[3,"formGroup"],[1,"row"],[1,"col"],["matInput","","placeholder","Nombre","formControlName","name","type","text"],["matInput","","placeholder","Apellido","formControlName","lastName","type","text"],["placeholder","Tipo de Documento","formControlName","documentType"],[3,"value",4,"ngFor","ngForOf"],[3,"label","control","maxLength"],["matInput","","placeholder","Direcci\xf3n","formControlName","address","type","text"],[3,"label","control"],[1,"col-6"],[3,"stateCtrl","label","tipo","PaisCambiado"],[3,"label","countrycode","ciudad","ciudadCambiada"],[1,"example-full-width","has-label"],["matInput","","placeholder","Estado","type","text","disabled","",3,"value"],["type","button",1,"btn","btn-warning","float-right",3,"disabled","click"],[3,"value"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Actualizar Usuario"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.removeData()}),e.TgZ(7,"span",6),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",11)(14,"mat-form-field"),e._UZ(15,"input",12),e.qZA()(),e.TgZ(16,"div",11)(17,"mat-form-field"),e._UZ(18,"input",13),e.qZA()()(),e.TgZ(19,"div",10)(20,"div",11)(21,"mat-form-field")(22,"mat-select",14),e.YNc(23,V,2,2,"mat-option",15),e.qZA()()(),e.TgZ(24,"div",11),e._UZ(25,"app-inputnumerico",16),e.qZA()(),e.TgZ(26,"div",10)(27,"div",11)(28,"mat-form-field"),e._UZ(29,"input",17),e.qZA()(),e.TgZ(30,"div",11),e._UZ(31,"app-inputnumerico",18),e.qZA()(),e.TgZ(32,"div",10)(33,"div",19)(34,"app-input-country",20),e.NdJ("PaisCambiado",function(n){return a.onCountryChange(n)}),e.qZA()(),e.TgZ(35,"div",19)(36,"app-inputciudad",21),e.NdJ("ciudadCambiada",function(n){return a.onCityChange(n)}),e.qZA()()(),e.TgZ(37,"div",10)(38,"div",19)(39,"mat-form-field",22),e._UZ(40,"input",23),e.qZA()(),e.TgZ(41,"div",19),e._UZ(42,"app-inputnumerico",18),e.qZA()(),e.TgZ(43,"button",24),e.NdJ("click",function(){return a.sendData()}),e._uU(44," Actualizar Usuario "),e.qZA()()()()()()()),2&t){let i;e.xp6(11),e.Q6J("formGroup",a.userupdate),e.xp6(12),e.Q6J("ngForOf",a.tipo_doc),e.xp6(2),e.Q6J("label","Celular")("control",a.userupdate.get("mobil"))("maxLength",10),e.xp6(6),e.Q6J("label","T\xe9lefono de Casa")("control",a.userupdate.get("homephone")),e.xp6(3),e.Q6J("stateCtrl",a.userupdate.get("country"))("label","Pais")("tipo",1),e.xp6(2),e.Q6J("label","Ciudad")("countrycode",a.userupdate.get("countrycode"))("ciudad",a.userupdate.get("city")),e.xp6(4),e.Q6J("value",(null==a.userupdate||null==(i=a.userupdate.get("city"))?null:i.value)+"-"+(null==a.userupdate||null==(i=a.userupdate.get("citycode"))?null:i.value)),e.xp6(2),e.Q6J("label","T\xe9lefono de Trabajo")("control",a.userupdate.get("workphone")),e.xp6(1),e.Q6J("disabled",a.userupdate.invalid)}},dependencies:[d.sg,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.R,C.d,Z.O,b.ey,y.KE,T.Nt,U.gD],styles:["\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGRhdGV1c2VyLmNvbXBvbmVudC5jc3MifQ== */"]}),r})(),A=(()=>{class r{transform(t,a){return t&&a?(a=a.toLowerCase(),t.filter(i=>{const n=i.name.toLowerCase(),s=i.docu.toString(),Q=i.email.toLowerCase();return n.includes(a)||Q.includes(a)||s.includes(a)})):t}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=e.Yjl({name:"filterusers",type:r,pure:!0}),r})();function q(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",14)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"button",19),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openModal("updateuser",n.docu))}),e.TgZ(9,"span",9),e._uU(10," edit "),e.qZA()(),e.TgZ(11,"button",19),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.deleteUser(n.docu))}),e.TgZ(12,"span",9),e._uU(13," delete "),e.qZA()()()()}if(2&r){const t=l.$implicit;e.xp6(2),e.Oqu(t.name+" "+t.lastName),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.docu)}}const k=function(r){return{itemsPerPage:5,currentPage:r}},L=[{path:"",children:[{path:"view",component:(()=>{class r{constructor(t,a,i,n,s){this.fb=t,this.apiservice=a,this.sweetalertservice=i,this.route=n,this.router=s,this.filter="",this.p=1}ngOnInit(){this.getDataUsers()}getDataUsers(){this.apiservice.get("lg/allusr").subscribe(t=>{console.log("res users",t),this.dataUser=t.data},t=>{console.log("error al consultar usuarios",t)})}openModal(t,a){console.log("===================================="),console.log(a),console.log("===================================="),"updateuser"==t&&(this.userdoc=a),$(`#${t}`).modal("show")}deleteUser(t){c().fire({icon:"info",title:"\xbfEsta seguro que desea eliminar el usuario?",showDenyButton:!0,confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then(a=>{if(a.isConfirmed){let i={DocumentID:t};console.log("===================================="),console.log(i),console.log("===================================="),this.apiservice.post("lg/delusrs",i).subscribe(n=>{c().fire({icon:"success",title:n.msg,confirmButtonText:"Aceptar"}),this.getDataUsers()},n=>{console.log("error al crear usuario",n),this.sweetalertservice.errorMessage(n?.error?.msg?n?.error?.msg:"Error al eliminar usuario")})}})}Usercreated(t){1==t&&(this.closeModal("createuser"),this.getDataUsers())}userUpdate(t){1==t&&(this.closeModal("updateuser"),this.getDataUsers())}closeModal(t){$(`#${t}`).modal("hide")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(o.qu),e.Y36(p.s),e.Y36(m.P),e.Y36(g.gz),e.Y36(g.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-viewall"]],decls:38,vars:11,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],["name","filter","type","search","placeholder","Buscar...",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-header","card-header-icon","card-header-warning"],[1,"card-icon"],[1,"material-symbols-outlined"],[1,"card-title"],[1,"btn","btn-warning","btn-sm","float-right",3,"click"],[1,"table-responsive"],[1,"table"],[1,"text-black","text-center"],["class","text-black text-center",4,"ngFor","ngForOf"],["previousLabel","Anterior","nextLabel","Siguiente",1,"my-pagination","text-center",3,"pageChange"],[3,"usuariocreado"],[3,"userdoc","userUpdate"],[1,"btn","btn-warning","btn-sm",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),e.NdJ("ngModelChange",function(n){return a.filter=n}),e.qZA()()(),e.TgZ(5,"div",2)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"span",9),e._uU(11," groups "),e.qZA()(),e.TgZ(12,"div",2)(13,"div",3)(14,"h4",10),e._uU(15," Informaci\xf3n de Usuarios "),e.TgZ(16,"button",11),e.NdJ("click",function(){return a.openModal("createuser")}),e.TgZ(17,"span",9),e._uU(18," add "),e.qZA()()()()()(),e.TgZ(19,"div",12)(20,"table",13)(21,"thead",14)(22,"tr")(23,"th"),e._uU(24,"Nombre"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"email"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Documento"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Acciones"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,q,14,3,"tr",15),e.ALo(33,"paginate"),e.ALo(34,"filterusers"),e.qZA()(),e.TgZ(35,"pagination-controls",16),e.NdJ("pageChange",function(n){return a.p=n}),e.qZA()()()()()()(),e.TgZ(36,"app-createuser",17),e.NdJ("usuariocreado",function(n){return a.Usercreated(n)}),e.qZA(),e.TgZ(37,"app-updateuser",18),e.NdJ("userUpdate",function(n){return a.userUpdate(n)}),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngModel",a.filter),e.xp6(28),e.Q6J("ngForOf",e.xi3(33,3,e.xi3(34,6,a.dataUser,a.filter),e.VKq(9,k,a.p))),e.xp6(5),e.Q6J("userdoc",a.userdoc))},dependencies:[d.sg,o.Fj,o.JJ,o.On,h.LS,N,J,h._s,A],styles:[".my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current {\r\n  background: orange;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZXdhbGwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtBQUNwQiIsImZpbGUiOiJ2aWV3YWxsLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubXktcGFnaW5hdGlvbiA6Om5nLWRlZXAgLm5neC1wYWdpbmF0aW9uIC5jdXJyZW50IHtcclxuICBiYWNrZ3JvdW5kOiBvcmFuZ2U7XHJcbn1cclxuIl19 */"]}),r})()}]},{path:"**",redirectTo:"view",pathMatch:"full"}];var x=u(23367),w=u(71969);let F=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,o.u5,o.UX,g.Bz.forChild(L),w.K,x.q,h.JX,w.K]}),r})()}}]);
//# sourceMappingURL=403.4311b4173284dc5c.js.map